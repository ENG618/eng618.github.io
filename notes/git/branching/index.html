<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, noarchive"><title>Eric Garcia - Git Branching</title><link rel=icon href=https://eng618.github.io//favicon.ico><meta name=description content="This is my personal dev portfolio created with Hugo."><meta name=generator content="Hugo 0.83.1"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Branching"><meta name=twitter:description content="I follow git branching naming convention outline in this gist
 List all branches including remotes
git branch -a Resetting local branch to match remote Setting your branch to exactly match the remote branch can be done in two steps:
git fetch origin git reset --hard origin/master If you want to save your current branch&rsquo;s state before doing this (just in case), you can do:
git commit -a -m &#34;Saving my work, just in case&#34; git branch my-saved-work  Tip: Also see git clean"><meta property="og:title" content="Git Branching"><meta property="og:description" content="I follow git branching naming convention outline in this gist
 List all branches including remotes
git branch -a Resetting local branch to match remote Setting your branch to exactly match the remote branch can be done in two steps:
git fetch origin git reset --hard origin/master If you want to save your current branch&rsquo;s state before doing this (just in case), you can do:
git commit -a -m &#34;Saving my work, just in case&#34; git branch my-saved-work  Tip: Also see git clean"><meta property="og:type" content="article"><meta property="og:url" content="https://eng618.github.io/notes/git/branching/"><meta property="article:section" content="notes"><meta property="og:locale" content="en"><link rel=stylesheet href=https://eng618.github.io/css/bundle.min.css></head><body><header class=header><div class=header__title><a href=/ class=header__title__link alt=Home><img src=https://eng618.github.io//images/profile_new.png class=header__title__logo alt="Eric Garcia"></a></div><nav class=menu aria-label=menu><ul class=menu__items aria-label=menu><li class=menu__items__item aria-label=Home><a href=/ class=menu__items__item__link alt=Home role=menuitem>Home</a></li><li class=menu__items__item aria-label=About><a href=/about/ class=menu__items__item__link alt=About role=menuitem>About</a></li></ul></nav><nav class=hamburger-menu aria-label=mobile-menu><div class=toggle><input type=checkbox class=hamburger__toggle id=hamburgerToggle name="hamburger toggle" aria-label="Hamburguer menu">
<label class=hamburger__toggle__icon for=hamburgerToggle><i class="fas fa-bars"></i></label><ul class=hamburger__items aria-label=mobile-menu><li class=hamburger__items__item aria-label=Home><a href=/ class=hamburger__items__item__link alt=Home role=menuitem>Home</a></li><li class=hamburger__items__item aria-label=About><a href=/about/ class=hamburger__items__item__link alt=About role=menuitem>About</a></li></ul></div></nav></header><article class=post><header class=post__header><h1 class=post__title>Git Branching</h1><p class="post__date date">Jan 1, 0001</p></header><main class=post__body><blockquote><p>I follow git branching naming convention outline in this <a href=https://gist.github.com/digitaljhelms/4287848>gist</a></p></blockquote><p>List all branches including remotes</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch -a
</code></pre></div><h3 id=resetting-local-branch-to-match-remote>Resetting local branch to match remote</h3><p>Setting your branch to exactly match the remote branch can be done in two steps:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git fetch origin
git reset --hard origin/master
</code></pre></div><p>If you want to save your current branch&rsquo;s state before doing this (just in case), you can do:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git commit -a -m <span style=color:#e6db74>&#34;Saving my work, just in case&#34;</span>
git branch my-saved-work
</code></pre></div><blockquote><p>Tip: Also see git clean</p></blockquote><h3 id=deleting-a-remote-branch>Deleting a remote branch</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git push origin :&lt;branch-name&gt;
</code></pre></div><h2 id=local-branches>Local branches</h2><p><strong>Sourced From:</strong> <a href=https://railsware.com/blog/2014/08/11/git-housekeeping-tutorial-clean-up-outdated-branches-in-local-and-remote-repositories/>Git housekeeping tutorial</a></p><p>At first, list all local branches:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch
</code></pre></div><p>We need to know what branches are already merged in “master” and can be easily removed:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git checkout master
git branch --merged
</code></pre></div><p>Now, remove all outdated branches with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch -d &lt;branch-name-old-merged-feature&gt;
</code></pre></div><p>Next, decide what to do with not merged branches:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch --no-merged
</code></pre></div><p>If some of them is just abandoned stuff that you don’t need anymore, remove it with “-D” option:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch -D old-abandoned-feature
</code></pre></div><h3 id=references-to-remote-branches>References to remote branches</h3><p>After each git pull or git fetch command Git creates references to remote branches in local repository, but doesn’t clean up stale references.</p><p>List referenced remote branches:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git branch -r
</code></pre></div><p>Clean-up outdated references:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git remote prune origin
</code></pre></div><blockquote><p>Tip: Update repository with: <code>git fetch -p</code> and Git automatically prunes all stale references.</p></blockquote><h2 id=remote-branches>Remote branches</h2><p>Usually, remote repository is a big garbage heap of stale branches, if there is no responsible housekeeping person.</p><p>After previous <code>git remote prune origin</code> we should have synched list of remote branches.</p><p>At first, we can find branches which are already merged in “master”:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git checkout master
$ git branch -r --merged
</code></pre></div><p>But this command does not provide much information. What if this branch is merged, but still used for feature development. Would be cool to know last commit date and author.</p><p>This magic snippet provides all required information:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#66d9ef>for</span> branch in <span style=color:#e6db74>`</span>git branch -r --merged | grep -v HEAD<span style=color:#e6db74>`</span>; <span style=color:#66d9ef>do</span> echo -e <span style=color:#e6db74>`</span>git show --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;%ci %cr %an&#34;</span> $branch | head -n 1<span style=color:#e6db74>`</span> <span style=color:#ae81ff>\\</span>t$branch; <span style=color:#66d9ef>done</span> | sort -r
</code></pre></div><p>Now, you can delete own remote branches, and ask other authors to clean-up theirs:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git push origin --delete branch-name
</code></pre></div><p>Similar snippet for not merged branches:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#66d9ef>for</span> branch in <span style=color:#e6db74>`</span>git branch -r --no-merged | grep -v HEAD<span style=color:#e6db74>`</span>; <span style=color:#66d9ef>do</span> echo -e <span style=color:#e6db74>`</span>git show --format<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;%ci %cr %an&#34;</span> $branch | head -n 1<span style=color:#e6db74>`</span> <span style=color:#ae81ff>\\</span>t$branch; <span style=color:#66d9ef>done</span> | sort -r
</code></pre></div><p>This list should be reviewed more thoroughly to avoid losing important commits.</p></main><footer class=post__footer></footer></article><footer class=footer><div class=footer__social><a href=https://github.com/ENG618 class=footer__social__link alt=github target=_blank aria-label=https://github.com/ENG618 rel=noopener><span><i class="fab fa-github"></i></span></a>
<a href=https://www.linkedin.com/in/garciaericn class=footer__social__link alt=linkedin target=_blank aria-label=https://www.linkedin.com/in/garciaericn rel=noopener><span><i class="fab fa-linkedin"></i></span></a>
<a href=https://twitter.com/garciaericn class=footer__social__link alt=twitter target=_blank aria-label=https://twitter.com/garciaericn rel=noopener><span><i class="fab fa-twitter"></i></span></a></div><address class=footer__contact></address><div class=copy><p>© 2021 Garcia Enterprise</p></div><script src=https://eng618.github.io/js/bundle.min.58209fc971cd5bd08cd889189ae476bf3c16736fd03234aeb7580bc6c504f5adc6797c906cb341a98099719e32801c5d3d1d3abd1ecded9433aedc2d34c7bc8d.js></script><script defer src=https://use.fontawesome.com/releases/v5.7.2/js/all.js integrity=sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP crossorigin=anonymous></script></footer></body></html>